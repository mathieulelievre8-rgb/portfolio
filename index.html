<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathieu Lelièvre | Portfolio.v2</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;600&family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="navbar">
        <div class="container nav-container">
            <a href="index.html" class="logo">MATHIEU<span>.DEV</span></a>
            <ul class="nav-links">
                <li><a href="#accueil">/ACCUEIL</a></li>
                <li><a href="#stack">/STACK</a></li>
                <li><a href="#projets">/PROJETS</a></li>
                <li><a href="#terminal">/TERMINAL</a></li>
                <li><a href="#contact">/CONTACT</a></li>
            </ul>
        </div>
    </nav>

    <header id="accueil" class="hero">
        <div class="container reveal">
            <div class="hero-content">
                <p class="greeting">> Initializing user profile...</p>
                <h1>Architecte d'Automation <br>& Web Developer.</h1>
                <p class="hero-subtitle">Je construis des systèmes autonomes et des interfaces numériques. Spécialisé en Python, Web et optimisation de flux.</p>
                <div class="hero-buttons">
                    <a href="#projets" class="btn-primary">Explorer les données</a>
                    <a href="#contact" class="btn-secondary">Initier le contact</a>
                </div>
            </div>
        </div>
    </header>

    <section id="stack" class="section-padding">
        <div class="container">
            <h2 class="section-title reveal">Tech Stack</h2>
            <div class="skills-grid">
                <div class="skill-item reveal">
                    <h3>01. Automation</h3>
                    <p>Python Scripting, Selenium, API Integrations, Cron Jobs.</p>
                </div>
                <div class="skill-item reveal">
                    <h3>02. Frontend</h3>
                    <p>HTML5, Modern CSS, JavaScript (ES6+), Responsive Design.</p>
                </div>
                <div class="skill-item reveal">
                    <h3>03. Tools</h3>
                    <p>VS Code, Git/GitHub, Render Cloud, Linux Terminal.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="projets" class="section-padding">
        <div class="container">
            <h2 class="section-title reveal">Projets Déployés</h2>
            <div class="projects-grid">
                <article class="project-card reveal">
                    <h3>Project: MERIVAN</h3>
                    <p>Site vitrine e-commerce pour une marque de parfumerie artisanale.</p>
                    <a href="https://mathieulelievre8-rgb.github.io/Merivan/" target="_blank" class="project-link">[ Lancer la simulation ]</a>
                </article>

                <article class="project-card reveal">
                    <h3>Project: BLOG</h3>
                    <p>Espace personnel de documentation et d'archivage textuel.</p>
                    <a href="textes/texte1.html" class="project-link">[ Accéder aux archives ]</a>
                </article>

                <article class="project-card reveal">
                    <h3>Project: API BACKEND</h3>
                    <p>Serveur Flask hébergé sur le cloud pour la gestion dynamique.</p>
                    <a href="#" class="project-link">[ Statut: ONLINE ]</a>
                </article>
            </div>
        </div>
    </section>

    <section id="terminal" class="section-padding">
        <div class="container reveal">
            <h2 class="section-title">Terminal Public (Livre d'Or)</h2>
            
            <div style="max-width: 600px; margin: 0 auto;">
                <div style="margin-bottom: 30px;">
                    <input type="text" id="pseudo" placeholder="Identifiant (Pseudo)...">
                    <textarea id="msgForum" rows="2" placeholder="Entrer la commande (Message)..."></textarea>
                    <button onclick="posterMessage()" class="btn-primary" style="width: 100%">Exécuter</button>
                </div>

                <div id="listeMessages">
                    <p style="color: #555; text-align: center;">Chargement des données...</p>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="section-padding">
        <div class="container reveal">
            <h2 class="section-title">Établir la connexion</h2>
            <div style="max-width: 600px; margin: 0 auto;">
                <form action="https://formspree.io/f/mblbwpol" method="POST">
                    <input type="text" name="name" placeholder="Nom de l'agent" required>
                    <input type="email" name="email" placeholder="Fréquence de contact (Email)" required>
                    <textarea name="message" rows="5" placeholder="Transmission de données..." required></textarea>
                    <button type="submit" class="btn-primary" style="width: 100%">Transmettre</button>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>SYSTEM STATUS: ONLINE | © 2025 MATHIEU LELIÈVRE</p>
            <p style="margin-top: 10px; opacity: 0.5;">Built with HTML, CSS, JS & Python</p>
        </div>
    </footer>

    <script>
        // 1. ANIMATION SCROLL (Reveal)
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) entry.target.classList.add('active');
            });
        });
        document.querySelectorAll('.reveal').forEach((el) => observer.observe(el));

        // 2. LOGIQUE DU FORUM (API)
        const API_URL = "https://portfolio-5x72.onrender.com/api/messages"; // Ton API Render

        async function chargerMessages() {
            try {
                const response = await fetch(API_URL);
                const messages = await response.json();
                const divListe = document.getElementById('listeMessages');
                divListe.innerHTML = "";

                if(messages.length === 0) {
                    divListe.innerHTML = "<p style='text-align:center; color:#555'>Aucune donnée trouvée.</p>";
                    return;
                }

                messages.reverse().forEach(msg => {
                    divListe.innerHTML += `
                        <div class="forum-message">
                            <div>
                                <strong style="color: var(--primary-color)">${msg.auteur}</strong> 
                                <span style="color: #666"> >> </span> 
                                <span>${msg.texte}</span>
                            </div>
                            <button onclick="supprimerMessage('${msg.id}')" class="delete-btn" title="Purger">✖</button>
                        </div>
                    `;
                });
            } catch (error) {
                console.error("Erreur connexion API:", error);
                document.getElementById('listeMessages').innerHTML = "<p style='color:red'>Erreur de connexion au serveur.</p>";
            }
        }

        async function posterMessage() {
            const pseudo = document.getElementById('pseudo').value;
            const texte = document.getElementById('msgForum').value;
            if(!pseudo || !texte) return alert("Erreur : Champs vides.");

            try {
                await fetch(API_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ auteur: pseudo, texte: texte })
                });
                document.getElementById('msgForum').value = "";
                chargerMessages(); 
            } catch (error) { alert("Erreur d'envoi"); }
        }

        async function supprimerMessage(id) {
            if(!confirm("Confirmer la suppression de cette donnée ?")) return;
            try {
                await fetch(`${API_URL}/${id}`, { method: "DELETE" });
                chargerMessages();
            } catch (error) { alert("Erreur suppression"); }
        }

        // Lancement initial
        chargerMessages();
    </script>

</body>
</html>